FROM node:15-alpine
EXPOSE 3000
WORKDIR /app
ENV PATH /app/node_modules/.bin:$PATH

ARG REACT_APP_BACKEND_HOST
ENV REACT_APP_BACKEND_HOST $REACT_APP_BACKEND_HOST
ARG REACT_APP_KEYCLOAK_AUTH_SERVER_URL
ENV REACT_APP_KEYCLOAK_AUTH_SERVER_URL $REACT_APP_KEYCLOAK_AUTH_SERVER_URL
ARG REACT_APP_KEYCLOAK_REALM
ENV REACT_APP_KEYCLOAK_REALM $REACT_APP_KEYCLOAK_REALM
ARG REACT_APP_KEYCLOAK_CLIENT_ID
ENV REACT_APP_KEYCLOAK_CLIENT_ID $REACT_APP_KEYCLOAK_CLIENT_ID

COPY package.json ./
COPY package-lock.json ./
RUN npm ci
COPY public public
COPY src src
CMD ["npm", "start"]